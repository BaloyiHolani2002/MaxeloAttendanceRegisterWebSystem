<!DOCTYPE html>
<html>
<head>
    <title>Employee Dashboard</title>
</head>
<body>
    <h1>Welcome, {{ user.name }} {{ user.surname }}</h1>
    <p>Date: {{ today }}</p>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
        {% for category, message in messages %}
          <li>{{ category|capitalize }}: {{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <h2>Attendance</h2>
    <p>Clock In: {{ clock_in_time or "Not yet" }}</p>
    <p>Clock Out: {{ clock_out_time or "Not yet" }}</p>
    <p>Type: {{ attendance_type or "Not yet" }}</p>

    {% if not clock_in_time %}
    <form action="{{ url_for('clock_in') }}" method="POST">
        <label>
            <input type="radio" name="attendanceType" value="Remote" required> Remote
        </label>
        <label>
            <input type="radio" name="attendanceType" value="Office" required> Office
        </label>
        <br>
        <textarea name="notes" placeholder="Notes (optional)"></textarea><br>
        <button type="submit">Clock In</button>
    </form>
    {% elif not clock_out_time %}
    <form action="{{ url_for('clock_out') }}" method="POST">
        <button type="submit">Clock Out</button>
    </form>
    {% else %}
    <p>You have completed your attendance for today.</p>
    {% endif %}
</body>
</html>
